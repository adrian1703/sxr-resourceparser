/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our Samples at https://docs.gradle.org/8.10/samples
 */
plugins {
    id 'java-library'
}

group = 'com.example'
version = '1.0-SNAPSHOT'

sourceCompatibility = '1.8'

java {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17
    sourceSets {
        main {
            java {
                srcDir 'modelgen/src/sxr'
            }
        }
    }
}

repositories {
    mavenCentral()
}

task generateSources {
    description = 'Creating java files.'
    group = 'verification'
    doLast {
        exec {
            executable = 'groovy.bat'
            args = ['-cp',
                    'modelgen/src',
                    'modelgen/src/pojotest.groovy',
                    './resources/peppol-bis-invoice-3/structure/syntax']
        }
    }
}


compileJava.dependsOn generateSources

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

task sourcesJar(type: Jar) {
    archiveClassifier.set('sources')
    from sourceSets.main.allSource
}